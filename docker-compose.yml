services:
  rkllm-server:
    build: .
    container_name: rkllm-server
    restart: unless-stopped
    privileged: true
    ports:
      - "${PORT:-8080}:${PORT:-8080}"
    volumes:
      # Map host NPU device to container
      - /dev:/dev
      # Mount your local models directory
      - ./models:/rkllm_server/models
    environment:
      - TARGET_PLATFORM=${TARGET_PLATFORM:-rk3588}
      - RKLLM_MODEL_PATH=${MODEL_NAME:-qwen3-vl-2b-instruct_w8a8_rk3588.rkllm}
      - PORT=${PORT:-8080}